{% extends 'Onthemove/base.html' %}
{%load staticfiles%}
{% block title %}Home{% endblock %}
{% block content %}

<fb:login-button scope="public_profile,email" onlogin="checkLoginState();">
</fb:login-button>


<!-- <div class="alert alert-success">
	<div id = "use-log">
		{%if user.is_authenticated%}
		Hi, {{ user.first_name}}
		{%endif%}
	</div>
</div> -->

<div class="form-group">
	<div id = "input-x">
	  <input id = "pac-input" type="text" class="form-control" placeholder="Enter Location"><span id = "ui-input-clear" class="glyphicon glyphicon-remove"></span>
	</div>
</div>





<!-- <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places"></script> -->

       
<div id="status">
</div>
<div id="googleMap"></div>

<!--
  Below we include the Login Button social plugin. This button uses
  the JavaScript SDK to present a graphical Login button that triggers
  the FB.login() function when clicked.
-->



{% endblock %}
{%block jsfiles%}
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=AIzaSyCrx02MVvtSlDsDMtqUT7B7KUxVdjDcOWk&sensor=false&libraries=places"></script>
<script src = "{%static "Onthemove/js/GoogleMaps.js"%}"></script>
<script>
	$(document).ready(function(){
	    navigator.geolocation.getCurrentPosition(
	    	function(pos){
		    	var act = {{activity_info|safe}};
		    	var loc = {{location_info|safe}};
		    	GoogleMap.init(pos,act,loc);
	    	},
		    function(){
		    	alert('Geo location is not supported');
		   	}
		);
		$("#ui-input-clear").click(function(e){
		   		e.preventDefault();
			$("#pac-input").val('');
			
			navigator.geolocation.getCurrentPosition(
	    	function(pos){
		    	var act = {{activity_info|safe}};
		    	var loc = {{location_info|safe}};
		    	GoogleMap.init(pos,act,loc);
	    	},
		    function(){
		    	alert('Geo location is not supported');
		   	}
		);
		});
	});
</script>
{%endblock%}